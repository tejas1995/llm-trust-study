(()=>{"use strict";let e="https://tejassrinivasan.pythonanywhere.com/";async function t(t){t.url_data=globalThis.url_data,console.log("Data"),"study_id"in t.url_data||(t.url_data.study_id="trialrun_studies"),t.url_data.queue_id=globalThis.uid,console.log("logged",t),console.log("Logging to",e+"log");try{let i=await $.ajax(e+"log",{data:JSON.stringify({project:"llm-trust-study/"+t.url_data.study_id,uid:globalThis.uid+"_"+t.url_data.prolific_id,payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"});return await async function(){return new Promise((e=>setTimeout(e,2e3)))}(),i}catch(e){console.log(e)}}var i=!1,o=[];let n,a,s=-1,r=null,c=!1,l=!1,d=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],_=0,u=-1,b=-1,m=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],p=-1,v=0,w=0;function g(e){if(-1!=p)return;const t=document.getElementById(`source_${e}_span`);t&&(t.style.display="block"==t.style.display?"none":"block");const i=document.getElementById(`source_${e}_dropbtn`);i&&(i.className="arrow right"==i.className?"arrow down":"arrow right"),0==d[e]&&(d[e]=!0,m[e]=Date.now()-a)}function h(e){if(-1!=s){n=!!e,p=Date.now()-a,$("#ai_explanation_titlebar").attr("disabled","true"),$("#view_sources_titlebar").attr("disabled","true");for(let e=0;e<10;e++)$(`#source_${e}_titlebar`).attr("disabled","true");$("#button_next").show(),$("#button_next").removeAttr("disabled"),s>=19&&($("#button_quit").show(),$("#button_quit").removeAttr("disabled")),e?(n=!0,$("#button_user_decision_claimtrue").attr("activedecision","true"),$("#button_user_decision_claimfalse").attr("activedecision","false")):(n=!1,$("#button_user_decision_claimfalse").attr("activedecision","true"),$("#button_user_decision_claimtrue").attr("activedecision","false"))}}function x(e){v+=e,0==v?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),v>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==v&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),f()),$("#main_box_instructions").children(":not(input)").each(((e,t)=>{$(t).hide()})),$(`#instructions_${v}`).show()}function f(){$("#button_user_decision_claimtrue").removeAttr("activedecision"),$("#button_user_decision_claimfalse").removeAttr("activedecision"),$("#button_user_decision_claimtrue").removeAttr("disabled"),$("#button_user_decision_claimfalse").removeAttr("disabled"),$("#ai_explanation_dropbtn").removeAttr("disabled"),$("#ai_explanation_dropbtn").removeAttr("activedecision"),$("#ai_explanation_dropbtn").attr("class","arrow right"),$("#ai_explanation_titlebar").removeAttr("disabled"),$("#ai_explanation_titlebar").removeAttr("activedecision"),$("#ai_explanation_dropdown").hide(),$("#view_sources_dropbtn").removeAttr("disabled"),$("#view_sources_dropbtn").removeAttr("activedecision"),$("#view_sources_dropbtn").attr("class","arrow right"),$("#view_sources_titlebar").removeAttr("disabled"),$("#view_sources_titlebar").removeAttr("activedecision"),$("#all_sources_div").hide();for(let e=0;e<10;e++)$(`#source_${e}_span`).hide(),$(`#source_${e}_dropbtn`).removeAttr("disabled"),$(`#source_${e}_dropbtn`).removeAttr("activedecision"),$(`#source_${e}_dropbtn`).attr("class","arrow right"),$(`#source_${e}_titlebar`).removeAttr("disabled"),$(`#source_${e}_titlebar`).removeAttr("activedecision");if(c=!1,l=!1,d=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],u=-1,b=-1,m=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],p=-1,$("#button_next").hide(),$("#button_quit").hide(),s+=1,s>=o.length)return $("#main_box_experiment").hide(),void(i?($("#reward_box_mock").text(`Your total reward is $${_.toFixed(2)} (${s+1} questions answered).`),$("#reward_box_mock").show(),$("#main_box_end_mock").show()):($("#reward_box").text(`Your total reward is $${_.toFixed(2)} (${s+1} questions answered).`),$("#reward_box").show(),$("#main_box_end").show()));r=o[s],$("#claim_span").html(r.claim);let e=r.llm_prediction?'<span style="color:#347e32">the claim is true</span>':'<span style="color:#e63232">the claim is false</span>';$("#ai_prediction_span").html(e),$("#ai_confidence_span").html(r.llm_confidence),$("#ai_explanation_span").html(r.llm_explanation);for(let e=0;e<r.sources.length;e++)$(`#source_${e}_span`).html(r.sources[e]);a=Date.now(),$("#progress").text(`Progress: ${s+1} / ${o.length}`)}document.getElementById("ai_explanation_titlebar")?.addEventListener("click",(function(){if(-1!=p)return;const e=document.getElementById("ai_explanation_dropdown");e&&(e.style.display="block");const t=document.getElementById("ai_explanation_dropbtn");t&&(t.className="arrow vanish"),c=!0,u=Date.now()-a,$("#ai_explanation_titlebar").attr("disabled","true"),$("#ai_explanation_titlebar").attr("activedecision","true")})),document.getElementById("view_sources_titlebar")?.addEventListener("click",(function(){if(-1!=p)return;const e=document.getElementById("all_sources_div");e&&(e.style.display="block"==e.style.display?"none":"block");const t=document.getElementById("view_sources_dropbtn");t&&(t.className="arrow right"==t.className?"arrow down":"arrow right"),0==l&&(l=!0,b=Date.now()-a),"false"==$("#view_sources_titlebar").attr("activedecision")||null==$("#view_sources_titlebar").attr("activedecision")?$("#view_sources_titlebar").attr("activedecision","true"):$("#view_sources_titlebar").attr("activedecision","false")})),document.getElementById("source_0_titlebar")?.addEventListener("click",(()=>g(0))),document.getElementById("source_1_titlebar")?.addEventListener("click",(()=>g(1))),document.getElementById("source_2_titlebar")?.addEventListener("click",(()=>g(2))),document.getElementById("source_3_titlebar")?.addEventListener("click",(()=>g(3))),document.getElementById("source_4_titlebar")?.addEventListener("click",(()=>g(4))),document.getElementById("source_5_titlebar")?.addEventListener("click",(()=>g(5))),document.getElementById("source_6_titlebar")?.addEventListener("click",(()=>g(6))),document.getElementById("source_7_titlebar")?.addEventListener("click",(()=>g(7))),document.getElementById("source_8_titlebar")?.addEventListener("click",(()=>g(8))),document.getElementById("source_9_titlebar")?.addEventListener("click",(()=>g(9))),$("#button_user_decision_claimtrue").on("click",(()=>h(!0))),$("#button_user_decision_claimfalse").on("click",(()=>h(!1))),$("#button_instructions_next").on("click",(()=>x(1))),$("#button_instructions_prev").on("click",(()=>x(-1))),$("#button_next").on("click",(()=>{let e=r.gt_label==n;if(e&&(_+=.1),-1!=s){let i={question_i:s,user_balance_post_interaction:_,final_user_decision:n,user_is_correct:e,accessed_explanation:c,accessed_sources:l,accessed_individual_source:d};i.times={access_explanation:u,access_sources:b,access_individual_source:m,final_decision:p},i.question=r,i.count_exited_page=w,t(i),w=0}f()})),$("#button_quit").on("click",(()=>{if(r.gt_label==n&&(_+=.1),-1!=s){let e={question_i:s,user_balance_post_interaction:_,final_user_decision:n,accessed_explanation:c,accessed_sources:l,accessed_individual_source:d};e.times={access_explanation:u,access_sources:b,access_individual_source:m,final_decision:p},e.question=r,e.count_exited_page=w,t(e),w=0}$("#main_box_experiment").hide(),i?($("#reward_box_mock").text(`Your total reward is $${_.toFixed(2)} (${s+1} questions answered).`),$("#reward_box_mock").show(),$("#main_box_end_mock").show()):($("#reward_box").text(`Your total reward is $${_.toFixed(2)} (${s+1} questions answered).`),$("#reward_box").show(),$("#main_box_end").show())}));const y=new URLSearchParams(window.location.search),E=y.get("start"),k=y.get("uid");if(globalThis.url_data=function(e){const t={};for(const[i,o]of e)t[i]=o;return t}(y.entries()),null!=k){if(globalThis.uid=k,"prolific_random"==globalThis.uid){let e=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${y.get("prolific_queue_name")}_${e}`}}else{let e=null;for(;null==e;)e=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=e}globalThis.url_data.session_id.startsWith("demo")&&(i=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((e=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((e=>{o=e,null!=E&&(s=parseInt(E)-1,console.log("Starting from",s)),x(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let I=!1;document.onvisibilitychange=()=>{I||(w+=1,I=!0,I=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUFXLEdBQUdDLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxZQUFpQkMsU0FBUyxFQUFHLEtBQy9EckYsV0FBV0ksSUFBTSxHQUFHaUUsRUFBVU0sSUFBSSwwQkFBMEJNLEcsTUFJN0QsQ0FDSCxJQUFJSyxFQUFpQixLQUNyQixLQUFvQixNQUFiQSxHQUNIQSxFQUFZQyxPQUFPLHNIQUV2QnZGLFdBQVdJLElBQU1rRixDLENBTVZ0RixXQUFXQyxTQUFxQixXQUFFdUYsV0FBVyxVQUNwRHJFLEdBQVcsR0FHZmpCLFFBQVFDLElBQUksbUJBQW9CSCxXQUFXSSxLRHhhcENQLGlCQUtILGFBSG1CUyxFQUFFbUYsUUFDakIsZ0JBQWdCekYsV0FBV0ksY0FBY3VDLEtBQUtDLFFBR3RELENDbWFBOEMsR0FBWUMsT0FBT0MsSUFFZjFGLFFBQVFDLElBQUksb0JBQ1pELFFBQVFDLElBQUlILFdBQVdJLEtBQ3ZCbUUsT0FBT0MsU0FBU3FCLFFBQVEsSUFFMUJDLE1BQU1DLElBQ0poRyxFQUFPZ0csRUFDYyxNQUFqQnJCLElBQ0FwRCxFQUFhMEUsU0FBU3RCLEdBQWlCLEVBQ3ZDeEUsUUFBUUMsSUFBSSxnQkFBaUJtQixJQUdqQzRCLEVBQWtCLEdBQ2xCNUMsRUFBRSwwQkFBMEIwQyxPQUM1QjFDLEVBQUUsaUNBQWlDK0MsTUFBTSxJQUc3Q25ELFFBQVFDLElBQUksNkJBQThCSCxXQUFXSSxLQUVyRCxJQUFJNkYsR0FBZSxFQUNuQjVELFNBQVM2RCxtQkFBcUIsS0FDckJELElBQ0RoRSxHQUFxQixFQUNyQmdFLEdBQWUsRUFJZkEsR0FBZSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2Nvbm5lY3Rvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gJy4vZ2xvYmFscydcbmltcG9ydCB7IE1PQ0tNT0RFIH0gZnJvbSAnLi9tYWluJ1xuXG5sZXQgU0VSVkVSX0xPR19ST09UID0gREVWTU9ERSA/IFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL1wiIDogXCJodHRwczovL3RlamFzc3Jpbml2YXNhbi5weXRob25hbnl3aGVyZS5jb20vXCJcblxuYXN5bmMgZnVuY3Rpb24gc2xlZXAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZF9kYXRhKCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gaW5jbHVkZSB0aW1lc3RhbXAgc28gdGhhdCB0aGluZ3MgZG9uJ3QgZ2V0IGNhY2hlZFxuICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmdldEpTT04oXG4gICAgICAgIGBiYWtlZF9xdWV1ZXMvJHtnbG9iYWxUaGlzLnVpZH0uanNvbj90PSR7RGF0ZS5ub3coKX1gLFxuICAgIClcbiAgICByZXR1cm4gcmVzdWx0XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nX2RhdGEoZGF0YSk6IFByb21pc2U8YW55PiB7XG4gICAgLy9pZiAoTU9DS01PREUpIHtcbiAgICAvLyAgICBjb25zb2xlLmxvZyhcImxvZ2dlZCAobW9jaylcIiwgZGF0YSlcbiAgICAvLyAgICByZXR1cm5cbiAgICAvL31cbiAgICBcbiAgICBkYXRhW1widXJsX2RhdGFcIl0gPSBnbG9iYWxUaGlzLnVybF9kYXRhXG4gICAgY29uc29sZS5sb2coXCJEYXRhXCIpXG4gICAgaWYgKCEoXCJzdHVkeV9pZFwiIGluIGRhdGFbJ3VybF9kYXRhJ10pKSB7XG4gICAgICAgIGRhdGFbJ3VybF9kYXRhJ11bXCJzdHVkeV9pZFwiXSA9IFwidHJpYWxydW5fc3R1ZGllc1wiXG4gICAgfVxuICAgIGRhdGFbXCJ1cmxfZGF0YVwiXVtcInF1ZXVlX2lkXCJdID0gZ2xvYmFsVGhpcy51aWRcbiAgICBjb25zb2xlLmxvZyhcImxvZ2dlZFwiLCBkYXRhKVxuICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0b1wiLCBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiKVxuXG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFNFUlZFUl9MT0dfUk9PVCArIFwibG9nXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcImxsbS10cnVzdC1zdHVkeS9cIitkYXRhWyd1cmxfZGF0YSddWydzdHVkeV9pZCddLFxuICAgICAgICAgICAgICAgICAgICB1aWQ6IGdsb2JhbFRoaXMudWlkK1wiX1wiK2RhdGFbJ3VybF9kYXRhJ11bJ3Byb2xpZmljX2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGF3YWl0IHNsZWVwKDIwMDApO1xuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbn0iLCJpbXBvcnQgeyBERVZNT0RFIH0gZnJvbSBcIi4vZ2xvYmFsc1wiXG5leHBvcnQgdmFyIFVJRDogc3RyaW5nXG5leHBvcnQgdmFyIE1PQ0tNT0RFOiBib29sZWFuID0gZmFsc2VcbmltcG9ydCB7IGxvYWRfZGF0YSwgbG9nX2RhdGEgfSBmcm9tICcuL2Nvbm5lY3RvcidcbmltcG9ydCB7IHBhcmFtc1RvT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHNcIlxuXG52YXIgZGF0YTogYW55W10gPSBbXVxubGV0IHF1ZXN0aW9uX2kgPSAtMVxubGV0IHF1ZXN0aW9uOiBhbnkgPSBudWxsXG5sZXQgZmluYWxfdXNlcl9kZWNpc2lvbjogYm9vbGVhblxubGV0IGFjY2Vzc2VkX2V4cGxhbmF0aW9uOiBib29sZWFuID0gZmFsc2VcbmxldCBhY2Nlc3NlZF9zb3VyY2VzOiBib29sZWFuID0gZmFsc2VcbmxldCBhY2Nlc3NlZF9pbmRpdmlkdWFsX3NvdXJjZTogYW55W10gPSBbZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2VdXG5sZXQgYmFsYW5jZSA9IDBcbmxldCB0aW1lX3F1ZXN0aW9uX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX3RvX2FjY2Vzc19leHBsYW5hdGlvbjogbnVtYmVyID0gLTFcbmxldCB0aW1lX3RvX2FjY2Vzc19zb3VyY2VzOiBudW1iZXIgPSAtMVxubGV0IHRpbWVfdG9fYWNjZXNzX2luZGl2aWR1YWxfc291cmNlOiBhbnlbXSA9IFstMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMV1cbmxldCB0aW1lX2ZpbmFsX2RlY2lzaW9uOiBudW1iZXIgPSAtMVxubGV0IGluc3RydWN0aW9uX2k6IG51bWJlciA9IDBcbmxldCBjb3VudF9leGl0ZWRfcGFnZTogbnVtYmVyID0gMFxuXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbWVzc2FnZSB8fCBcIkFzc2VydGlvbiBmYWlsZWRcIjtcbiAgICB9XG59XG5cbi8vIEZ1bmN0aW9uIHRvIHRvZ2dsZSB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgZGl2IGVsZW1lbnRcbmZ1bmN0aW9uIHNob3dFeHBsYW5hdGlvbigpIHtcbiAgICBpZiAodGltZV9maW5hbF9kZWNpc2lvbiAhPSAtMSkge1xuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGRpdiBlbGVtZW50IGJ5IGl0cyBJRFxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaV9leHBsYW5hdGlvbl9kcm9wZG93bicpO1xuICAgIGlmIChkaXYpIHtcbiAgICAgICAgLy8gVG9nZ2xlIHRoZSB2aXNpYmlsaXR5XG4gICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG4gICAgY29uc3QgYnV0dG9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaV9leHBsYW5hdGlvbl9kcm9wYnRuJyk7XG4gICAgaWYgKGJ1dHRvbl9kaXYpIHtcbiAgICAgICAgLy9DaGFuZ2UgdGhlIGNsYXNzIHRvIGFycm93IGRvd25cbiAgICAgICAgYnV0dG9uX2Rpdi5jbGFzc05hbWUgPSAnYXJyb3cgdmFuaXNoJztcbiAgICB9XG4gICAgYWNjZXNzZWRfZXhwbGFuYXRpb24gPSB0cnVlXG4gICAgdGltZV90b19hY2Nlc3NfZXhwbGFuYXRpb24gPSBEYXRlLm5vdygpIC0gdGltZV9xdWVzdGlvbl9zdGFydFxuXG4gICAgLy8kKFwiI2FpX2V4cGxhbmF0aW9uX2Ryb3Bkb3duXCIpLnRvZ2dsZSgpXG4gICAgJChcIiNhaV9leHBsYW5hdGlvbl90aXRsZWJhclwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNhaV9leHBsYW5hdGlvbl90aXRsZWJhclwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gIH1cbiAgXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlIGJ1dHRvbiBjbGlja1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FpX2V4cGxhbmF0aW9uX3RpdGxlYmFyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0V4cGxhbmF0aW9uKTtcblxuZnVuY3Rpb24gc2hvd0FsbFNvdXJjZXMoKSB7XG4gICAgaWYgKHRpbWVfZmluYWxfZGVjaXNpb24gIT0gLTEpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBkaXYgZWxlbWVudCBieSBpdHMgSURcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxsX3NvdXJjZXNfZGl2Jyk7XG4gICAgaWYgKGRpdikge1xuICAgICAgICAvLyBUb2dnbGUgdGhlIHZpc2liaWxpdHlcbiAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAoZGl2LnN0eWxlLmRpc3BsYXkgPT0gJ2Jsb2NrJykgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgIH1cbiAgICBjb25zdCBidXR0b25fZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdfc291cmNlc19kcm9wYnRuJyk7XG4gICAgaWYgKGJ1dHRvbl9kaXYpIHtcbiAgICAgICAgLy9DaGFuZ2UgdGhlIGNsYXNzIHRvIGFycm93IHZhbmlzaFxuICAgICAgICBidXR0b25fZGl2LmNsYXNzTmFtZSA9IChidXR0b25fZGl2LmNsYXNzTmFtZSA9PSAnYXJyb3cgcmlnaHQnKSA/ICdhcnJvdyBkb3duJyA6ICdhcnJvdyByaWdodCc7XG4gICAgfVxuICAgIGlmIChhY2Nlc3NlZF9zb3VyY2VzID09IGZhbHNlKSB7XG4gICAgICAgIGFjY2Vzc2VkX3NvdXJjZXMgPSB0cnVlXG4gICAgICAgIHRpbWVfdG9fYWNjZXNzX3NvdXJjZXMgPSBEYXRlLm5vdygpIC0gdGltZV9xdWVzdGlvbl9zdGFydFxuICAgIH1cblxuICAgIC8vJChcIiNhaV9leHBsYW5hdGlvbl9kcm9wZG93blwiKS50b2dnbGUoKVxuICAgIC8vJChcIiN2aWV3X3NvdXJjZXNfdGl0bGViYXJcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIGlmICgoJChcIiN2aWV3X3NvdXJjZXNfdGl0bGViYXJcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpID09IFwiZmFsc2VcIikgfHwgKCQoXCIjdmlld19zb3VyY2VzX3RpdGxlYmFyXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKSA9PSBudWxsKSkge1xuICAgICAgICAkKFwiI3ZpZXdfc291cmNlc190aXRsZWJhclwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkKFwiI3ZpZXdfc291cmNlc190aXRsZWJhclwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJmYWxzZVwiKVxuICAgIH1cbiAgICAvLyQoXCIjdmlld19zb3VyY2VzX3RpdGxlYmFyXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbn1cblxuLy8gRXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBidXR0b24gY2xpY2tcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3X3NvdXJjZXNfdGl0bGViYXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93QWxsU291cmNlcyk7XG5cbmZ1bmN0aW9uIHNob3dTb3VyY2Uoc291cmNlX251bTogbnVtYmVyKSB7XG4gICAgaWYgKHRpbWVfZmluYWxfZGVjaXNpb24gIT0gLTEpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB0aGUgZGl2IGVsZW1lbnQgYnkgaXRzIElEXG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNvdXJjZV8ke3NvdXJjZV9udW19X3NwYW5gKTtcbiAgICBpZiAoZGl2KSB7XG4gICAgICAgIC8vIFRvZ2dsZSB0aGUgdmlzaWJpbGl0eVxuICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9IChkaXYuc3R5bGUuZGlzcGxheSA9PSAnYmxvY2snKSA/ICdub25lJyA6ICdibG9jayc7XG4gICAgfVxuICAgIGNvbnN0IGJ1dHRvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc291cmNlXyR7c291cmNlX251bX1fZHJvcGJ0bmApO1xuICAgIGlmIChidXR0b25fZGl2KSB7XG4gICAgICAgIC8vQ2hhbmdlIHRoZSBjbGFzcyB0byBhcnJvdyBkb3duXG4gICAgICAgIGJ1dHRvbl9kaXYuY2xhc3NOYW1lID0gKGJ1dHRvbl9kaXYuY2xhc3NOYW1lID09ICdhcnJvdyByaWdodCcpID8gJ2Fycm93IGRvd24nIDogJ2Fycm93IHJpZ2h0JztcbiAgICB9XG4gICAgaWYgKGFjY2Vzc2VkX2luZGl2aWR1YWxfc291cmNlW3NvdXJjZV9udW1dID09IGZhbHNlKSB7XG4gICAgICAgIGFjY2Vzc2VkX2luZGl2aWR1YWxfc291cmNlW3NvdXJjZV9udW1dID0gdHJ1ZVxuICAgICAgICB0aW1lX3RvX2FjY2Vzc19pbmRpdmlkdWFsX3NvdXJjZVtzb3VyY2VfbnVtXSA9IERhdGUubm93KCkgLSB0aW1lX3F1ZXN0aW9uX3N0YXJ0XG4gICAgfVxuICAgIC8vJChcIiNhaV9leHBsYW5hdGlvbl9kcm9wZG93blwiKS50b2dnbGUoKVxuICAgIC8vJChgI3NvdXJjZV8ke3NvdXJjZV9udW19X3RpdGxlYmFyYCkuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIC8vJChgI3NvdXJjZV8ke3NvdXJjZV9udW19X3RpdGxlYmFyYCkuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxufVxuXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlIGJ1dHRvbiBjbGlja1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV8wX3RpdGxlYmFyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1NvdXJjZSgwKSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlXzFfdGl0bGViYXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzaG93U291cmNlKDEpKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfMl90aXRsZWJhcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dTb3VyY2UoMikpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV8zX3RpdGxlYmFyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1NvdXJjZSgzKSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlXzRfdGl0bGViYXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzaG93U291cmNlKDQpKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfNV90aXRsZWJhcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dTb3VyY2UoNSkpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV82X3RpdGxlYmFyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1NvdXJjZSg2KSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlXzdfdGl0bGViYXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzaG93U291cmNlKDcpKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfOF90aXRsZWJhcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dTb3VyY2UoOCkpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV85X3RpdGxlYmFyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1NvdXJjZSg5KSk7XG5cbmZ1bmN0aW9uIHVwZGF0ZVVzZXJEZWNpc2lvbih1c2VyX2RlY2lzaW9uOiBib29sZWFuKSB7XG4gICAgaWYgKHF1ZXN0aW9uX2kgIT0gLTEpIHtcbiAgICAgICAgZmluYWxfdXNlcl9kZWNpc2lvbiA9IHVzZXJfZGVjaXNpb24gPyB0cnVlIDogZmFsc2VcblxuICAgICAgICB0aW1lX2ZpbmFsX2RlY2lzaW9uID0gRGF0ZS5ub3coKSAtIHRpbWVfcXVlc3Rpb25fc3RhcnRcblxuICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3RpdGxlYmFyXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiN2aWV3X3NvdXJjZXNfdGl0bGViYXJcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICAgICBmb3IgKGxldCBzb3VyY2VfbnVtID0gMDsgc291cmNlX251bSA8IDEwOyBzb3VyY2VfbnVtKyspIHtcbiAgICAgICAgICAgICQoYCNzb3VyY2VfJHtzb3VyY2VfbnVtfV90aXRsZWJhcmApLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAgICAgfVxuXG4gICAgICAgICQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgICAgICQoXCIjYnV0dG9uX25leHRcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgICAgIGlmIChxdWVzdGlvbl9pID49IDE5KSB7XG4gICAgICAgICAgICAkKCcjYnV0dG9uX3F1aXQnKS5zaG93KClcbiAgICAgICAgICAgICQoJyNidXR0b25fcXVpdCcpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICAgICB9XG4gICAgICAgIC8vJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbXRydWVcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICAgICAvLyQoXCIjYnV0dG9uX3VzZXJfZGVjaXNpb25fY2xhaW1mYWxzZVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgICAgIGlmICh1c2VyX2RlY2lzaW9uKSB7XG4gICAgICAgICAgICBmaW5hbF91c2VyX2RlY2lzaW9uID0gdHJ1ZVxuICAgICAgICAgICAgJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbXRydWVcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAgICAgJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbWZhbHNlXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcImZhbHNlXCIpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmaW5hbF91c2VyX2RlY2lzaW9uID0gZmFsc2VcbiAgICAgICAgICAgICQoXCIjYnV0dG9uX3VzZXJfZGVjaXNpb25fY2xhaW1mYWxzZVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICAgICAkKFwiI2J1dHRvbl91c2VyX2RlY2lzaW9uX2NsYWltdHJ1ZVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJmYWxzZVwiKVxuICAgICAgICB9XG5cbiAgICB9XG59XG5cbiQoXCIjYnV0dG9uX3VzZXJfZGVjaXNpb25fY2xhaW10cnVlXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gdXBkYXRlVXNlckRlY2lzaW9uKHRydWUpKVxuJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbWZhbHNlXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gdXBkYXRlVXNlckRlY2lzaW9uKGZhbHNlKSlcblxuXG5mdW5jdGlvbiBuZXh0X2luc3RydWN0aW9ucyhpbmNyZW1lbnQ6IG51bWJlcikge1xuICAgIGluc3RydWN0aW9uX2kgKz0gaW5jcmVtZW50XG5cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA9PSAwKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfcHJldlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPj0gNikge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuc2hvdygpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIlN0YXJ0IHN0dWR5XCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLmhpZGUoKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS52YWwoXCJOZXh0XCIpXG4gICAgfVxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDcpIHtcbiAgICAgICAgJChcIiNtYWluX2JveF9pbnN0cnVjdGlvbnNcIikuaGlkZSgpXG4gICAgICAgICQoXCIjbWFpbl9ib3hfZXhwZXJpbWVudFwiKS5zaG93KClcbiAgICAgICAgbmV4dF9xdWVzdGlvbigpXG4gICAgfVxuXG4gICAgJChcIiNtYWluX2JveF9pbnN0cnVjdGlvbnNcIikuY2hpbGRyZW4oXCI6bm90KGlucHV0KVwiKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgICAkKGVsKS5oaWRlKClcbiAgICB9KVxuICAgICQoYCNpbnN0cnVjdGlvbnNfJHtpbnN0cnVjdGlvbl9pfWApLnNob3coKVxufVxuJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikub24oXCJjbGlja1wiLCAoKSA9PiBuZXh0X2luc3RydWN0aW9ucygrMSkpXG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfcHJldlwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKC0xKSlcblxuJChcIiNidXR0b25fbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcblxuICAgIGxldCBndF9sYWJlbDogYm9vbGVhbiA9IHF1ZXN0aW9uIVtcImd0X2xhYmVsXCJdXG4gICAgbGV0IHVzZXJfaXNfY29ycmVjdDogYm9vbGVhbiA9IGd0X2xhYmVsID09IGZpbmFsX3VzZXJfZGVjaXNpb25cbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIGJhbGFuY2UgKz0gMC4xXG4gICAgfVxuXG4gICAgaWYgKHF1ZXN0aW9uX2kgIT0gLTEpIHtcbiAgICAgICAgbGV0IGxvZ2dlZF9kYXRhID0ge1xuICAgICAgICAgICAgXCJxdWVzdGlvbl9pXCI6IHF1ZXN0aW9uX2ksXG4gICAgICAgICAgICBcInVzZXJfYmFsYW5jZV9wb3N0X2ludGVyYWN0aW9uXCI6IGJhbGFuY2UsXG4gICAgICAgICAgICBcImZpbmFsX3VzZXJfZGVjaXNpb25cIjogZmluYWxfdXNlcl9kZWNpc2lvbixcbiAgICAgICAgICAgIFwidXNlcl9pc19jb3JyZWN0XCI6IHVzZXJfaXNfY29ycmVjdCxcbiAgICAgICAgICAgIFwiYWNjZXNzZWRfZXhwbGFuYXRpb25cIjogYWNjZXNzZWRfZXhwbGFuYXRpb24sXG4gICAgICAgICAgICBcImFjY2Vzc2VkX3NvdXJjZXNcIjogYWNjZXNzZWRfc291cmNlcyxcbiAgICAgICAgICAgIFwiYWNjZXNzZWRfaW5kaXZpZHVhbF9zb3VyY2VcIjogYWNjZXNzZWRfaW5kaXZpZHVhbF9zb3VyY2UsXG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZWRfZGF0YVsndGltZXMnXSA9IHtcbiAgICAgICAgICAgIFwiYWNjZXNzX2V4cGxhbmF0aW9uXCI6IHRpbWVfdG9fYWNjZXNzX2V4cGxhbmF0aW9uLFxuICAgICAgICAgICAgXCJhY2Nlc3Nfc291cmNlc1wiOiB0aW1lX3RvX2FjY2Vzc19zb3VyY2VzLFxuICAgICAgICAgICAgXCJhY2Nlc3NfaW5kaXZpZHVhbF9zb3VyY2VcIjogdGltZV90b19hY2Nlc3NfaW5kaXZpZHVhbF9zb3VyY2UsXG4gICAgICAgICAgICBcImZpbmFsX2RlY2lzaW9uXCI6IHRpbWVfZmluYWxfZGVjaXNpb24sXG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3F1ZXN0aW9uJ10gPSBxdWVzdGlvblxuICAgICAgICBsb2dnZWRfZGF0YVsnY291bnRfZXhpdGVkX3BhZ2UnXSA9IGNvdW50X2V4aXRlZF9wYWdlXG4gICAgICAgIGxvZ19kYXRhKGxvZ2dlZF9kYXRhKVxuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSA9IDBcbiAgICB9XG4gICAgXG5cbiAgICBuZXh0X3F1ZXN0aW9uKClcbn0pO1xuXG4kKFwiI2J1dHRvbl9xdWl0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGxldCBndF9sYWJlbDogYm9vbGVhbiA9IHF1ZXN0aW9uIVtcImd0X2xhYmVsXCJdXG4gICAgbGV0IHVzZXJfaXNfY29ycmVjdDogYm9vbGVhbiA9IGd0X2xhYmVsID09IGZpbmFsX3VzZXJfZGVjaXNpb25cbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIGJhbGFuY2UgKz0gMC4xXG4gICAgfVxuXG4gICAgaWYgKHF1ZXN0aW9uX2kgIT0gLTEpIHtcbiAgICAgICAgbGV0IGxvZ2dlZF9kYXRhID0ge1xuICAgICAgICAgICAgXCJxdWVzdGlvbl9pXCI6IHF1ZXN0aW9uX2ksXG4gICAgICAgICAgICBcInVzZXJfYmFsYW5jZV9wb3N0X2ludGVyYWN0aW9uXCI6IGJhbGFuY2UsXG4gICAgICAgICAgICBcImZpbmFsX3VzZXJfZGVjaXNpb25cIjogZmluYWxfdXNlcl9kZWNpc2lvbixcbiAgICAgICAgICAgIFwiYWNjZXNzZWRfZXhwbGFuYXRpb25cIjogYWNjZXNzZWRfZXhwbGFuYXRpb24sXG4gICAgICAgICAgICBcImFjY2Vzc2VkX3NvdXJjZXNcIjogYWNjZXNzZWRfc291cmNlcyxcbiAgICAgICAgICAgIFwiYWNjZXNzZWRfaW5kaXZpZHVhbF9zb3VyY2VcIjogYWNjZXNzZWRfaW5kaXZpZHVhbF9zb3VyY2UsXG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZWRfZGF0YVsndGltZXMnXSA9IHtcbiAgICAgICAgICAgIFwiYWNjZXNzX2V4cGxhbmF0aW9uXCI6IHRpbWVfdG9fYWNjZXNzX2V4cGxhbmF0aW9uLFxuICAgICAgICAgICAgXCJhY2Nlc3Nfc291cmNlc1wiOiB0aW1lX3RvX2FjY2Vzc19zb3VyY2VzLFxuICAgICAgICAgICAgXCJhY2Nlc3NfaW5kaXZpZHVhbF9zb3VyY2VcIjogdGltZV90b19hY2Nlc3NfaW5kaXZpZHVhbF9zb3VyY2UsXG4gICAgICAgICAgICBcImZpbmFsX2RlY2lzaW9uXCI6IHRpbWVfZmluYWxfZGVjaXNpb24sXG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3F1ZXN0aW9uJ10gPSBxdWVzdGlvblxuICAgICAgICBsb2dnZWRfZGF0YVsnY291bnRfZXhpdGVkX3BhZ2UnXSA9IGNvdW50X2V4aXRlZF9wYWdlXG4gICAgICAgIGxvZ19kYXRhKGxvZ2dlZF9kYXRhKVxuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSA9IDBcbiAgICB9XG5cbiAgICAkKFwiI21haW5fYm94X2V4cGVyaW1lbnRcIikuaGlkZSgpXG4gICAgaWYgKE1PQ0tNT0RFKSB7XG4gICAgICAgICQoJyNyZXdhcmRfYm94X21vY2snKS50ZXh0KGBZb3VyIHRvdGFsIHJld2FyZCBpcyAkJHtiYWxhbmNlLnRvRml4ZWQoMil9ICgke3F1ZXN0aW9uX2krMX0gcXVlc3Rpb25zIGFuc3dlcmVkKS5gKVxuICAgICAgICAkKCcjcmV3YXJkX2JveF9tb2NrJykuc2hvdygpXG4gICAgICAgICQoXCIjbWFpbl9ib3hfZW5kX21vY2tcIikuc2hvdygpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJCgnI3Jld2FyZF9ib3gnKS50ZXh0KGBZb3VyIHRvdGFsIHJld2FyZCBpcyAkJHtiYWxhbmNlLnRvRml4ZWQoMil9ICgke3F1ZXN0aW9uX2krMX0gcXVlc3Rpb25zIGFuc3dlcmVkKS5gKVxuICAgICAgICAkKCcjcmV3YXJkX2JveCcpLnNob3coKVxuICAgICAgICAkKFwiI21haW5fYm94X2VuZFwiKS5zaG93KClcbiAgICB9XG4gICAgcmV0dXJuXG59KVxuXG5cblxuZnVuY3Rpb24gc2hvd19yZXN1bHQoKSB7XG5cblxuICAgIC8vbGV0IGFpX2lzX2NvcnJlY3Q6IGJvb2xlYW4gPSBxdWVzdGlvbiFbXCJsbG1faXNfY29ycmVjdFwiXVxuICAgIC8vbGV0IG1lc3NhZ2UgPSBcIkNvcnJlY3QgYW5zd2VyOiA8Yj5PcHRpb24gXCIgKyBjb3JyZWN0X29wdGlvbiArIFwiPC9iPi48YnI+XCJcbiAgICAvL2lmICh1c2VyX2lzX2NvcnJlY3QpIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+Y29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIC8vfVxuICAgIC8vZWxzZSB7XG4gICAgLy8gICAgbWVzc2FnZSArPSBcIllvdSBwaWNrZWQgT3B0aW9uIFwiICsgZmluYWxfdXNlcl9kZWNpc2lvbiArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgLy99XG4gICAgLy9pZiAoYWlfaXNfY29ycmVjdCkge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PGI+PC9zcGFuPi48YnI+XCJcbiAgICAvL31cbiAgICAvL2Vsc2Uge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPmluY29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIC8vfVxuICAgIC8vaWYgKHVzZXJfaXNfY29ycmVjdCkge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+WW91IHJlY2VpdmUgYSByZXdhcmQgb2YgJDAuMTAuPC9iPjwvc3Bhbj5cIlxuICAgIC8vICAgIGJhbGFuY2UgKz0gMC4xXG4gICAgLy99XG4gICAgLy9lbHNlIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IFwiPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+WW91IGRvIG5vdCByZWNlaXZlIGFueSByZXdhcmQuPC9iPjwvc3Bhbj5cIlxuICAgIC8vfVxuICAgIC8vbWVzc2FnZSArPSBcIjxicj5cIlxuICAgIC8vaWYgKHN1Y2Nlc3MpIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IGBZb3UgZ2FpbiAkJHsoYmV0X3ZhbCpiZXRfdmFsX3JhdGlvKS50b0ZpeGVkKDIpfS5gXG4gICAgLy8gICAgYmFsYW5jZSArPSBiZXRfdmFsKmJldF92YWxfcmF0aW9cbiAgICAvL30gZWxzZSB7XG4gICAgLy8gICAgbWVzc2FnZSArPSBgWW91IGxvc2UgJCR7KGJldF92YWwvMS4wKS50b0ZpeGVkKDIpfS5gXG4gICAgLy8gICAgYmFsYW5jZSAtPSBiZXRfdmFsLzEuMFxuICAgIC8vICAgIGJhbGFuY2UgPSBNYXRoLm1heCgwLCBiYWxhbmNlKVxuICAgIC8vfVxuICAgIC8vJChcIiNiYWxhbmNlXCIpLnRleHQoYEJhbGFuY2U6ICQke2JhbGFuY2UudG9GaXhlZCgyKX0gKyAkMS4wYClcbiAgICAvLyQoXCIjcmVzdWx0X3NwYW5cIikuaHRtbChtZXNzYWdlKVxuICAgIC8vLy8kKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKVxuICAgIC8vJChcIiNyZXN1bHRfc3BhblwiKS5zaG93KClcbiAgICAvLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcblxuICAgIC8vJCgnI3JhbmdlX3ZhbCcpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbn1cblxuLy8kKFwiI2J1dHRvbl9wbGFjZV9iZXRcIikub24oXCJjbGlja1wiLCBzaG93X3Jlc3VsdClcblxuZnVuY3Rpb24gbmV4dF9xdWVzdGlvbigpIHtcbiAgICAvLyByZXN0b3JlIHByZXZpb3VzIHN0YXRlIG9mIFVJXG5cbiAgICAkKFwiI2J1dHRvbl91c2VyX2RlY2lzaW9uX2NsYWltdHJ1ZVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl91c2VyX2RlY2lzaW9uX2NsYWltZmFsc2VcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbXRydWVcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbWZhbHNlXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuXG4gICAgJChcIiNhaV9leHBsYW5hdGlvbl9kcm9wYnRuXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYWlfZXhwbGFuYXRpb25fZHJvcGJ0blwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2Ryb3BidG5cIikuYXR0cihcImNsYXNzXCIsIFwiYXJyb3cgcmlnaHRcIilcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3RpdGxlYmFyXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYWlfZXhwbGFuYXRpb25fdGl0bGViYXJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNhaV9leHBsYW5hdGlvbl9kcm9wZG93blwiKS5oaWRlKClcblxuICAgICQoXCIjdmlld19zb3VyY2VzX2Ryb3BidG5cIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiN2aWV3X3NvdXJjZXNfZHJvcGJ0blwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI3ZpZXdfc291cmNlc19kcm9wYnRuXCIpLmF0dHIoXCJjbGFzc1wiLCBcImFycm93IHJpZ2h0XCIpXG4gICAgJChcIiN2aWV3X3NvdXJjZXNfdGl0bGViYXJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiN2aWV3X3NvdXJjZXNfdGl0bGViYXJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNhbGxfc291cmNlc19kaXZcIikuaGlkZSgpXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X3NwYW5gKS5oaWRlKClcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X2Ryb3BidG5gKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X2Ryb3BidG5gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X2Ryb3BidG5gKS5hdHRyKFwiY2xhc3NcIiwgXCJhcnJvdyByaWdodFwiKVxuICAgICAgICAkKGAjc291cmNlXyR7aX1fdGl0bGViYXJgKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X3RpdGxlYmFyYCkucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfVxuXG4gICAgYWNjZXNzZWRfZXhwbGFuYXRpb24gPSBmYWxzZVxuICAgIGFjY2Vzc2VkX3NvdXJjZXMgPSBmYWxzZVxuICAgIGFjY2Vzc2VkX2luZGl2aWR1YWxfc291cmNlID0gW2ZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlXVxuXG4gICAgdGltZV90b19hY2Nlc3NfZXhwbGFuYXRpb24gPSAtMVxuICAgIHRpbWVfdG9fYWNjZXNzX3NvdXJjZXMgPSAtMVxuICAgIHRpbWVfdG9fYWNjZXNzX2luZGl2aWR1YWxfc291cmNlID0gWy0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xXVxuICAgIHRpbWVfZmluYWxfZGVjaXNpb24gPSAtMVxuICAgIFxuXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5oaWRlKClcbiAgICAkKCcjYnV0dG9uX3F1aXQnKS5oaWRlKClcbiAgICAvLyQoXCIjcmFuZ2VfdmFsXCIpLnZhbCh1c2VyX3RydXN0KVxuXG4gICAgcXVlc3Rpb25faSArPSAxXG4gICAgaWYgKHF1ZXN0aW9uX2kgPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLmhpZGUoKVxuICAgICAgICBpZiAoTU9DS01PREUpIHtcbiAgICAgICAgICAgICQoJyNyZXdhcmRfYm94X21vY2snKS50ZXh0KGBZb3VyIHRvdGFsIHJld2FyZCBpcyAkJHtiYWxhbmNlLnRvRml4ZWQoMil9ICgke3F1ZXN0aW9uX2krMX0gcXVlc3Rpb25zIGFuc3dlcmVkKS5gKVxuICAgICAgICAgICAgJCgnI3Jld2FyZF9ib3hfbW9jaycpLnNob3coKVxuICAgICAgICAgICAgJChcIiNtYWluX2JveF9lbmRfbW9ja1wiKS5zaG93KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJyNyZXdhcmRfYm94JykudGV4dChgWW91ciB0b3RhbCByZXdhcmQgaXMgJCR7YmFsYW5jZS50b0ZpeGVkKDIpfSAoJHtxdWVzdGlvbl9pKzF9IHF1ZXN0aW9ucyBhbnN3ZXJlZCkuYClcbiAgICAgICAgICAgICQoJyNyZXdhcmRfYm94Jykuc2hvdygpXG4gICAgICAgICAgICAkKFwiI21haW5fYm94X2VuZFwiKS5zaG93KClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgcXVlc3Rpb24gPSBkYXRhW3F1ZXN0aW9uX2ldXG5cbiAgICAkKFwiI2NsYWltX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJjbGFpbVwiXSlcbiAgICBsZXQgYWlfcHJlZGljdGlvbiA9IHF1ZXN0aW9uIVtcImxsbV9wcmVkaWN0aW9uXCJdID8gXCI8c3BhbiBzdHlsZT1cXFwiY29sb3I6IzM0N2UzMlxcXCI+dGhlIGNsYWltIGlzIHRydWU8L3NwYW4+XCIgOiBcIjxzcGFuIHN0eWxlPVxcXCJjb2xvcjojZTYzMjMyXFxcIj50aGUgY2xhaW0gaXMgZmFsc2U8L3NwYW4+XCJcbiAgICAkKFwiI2FpX3ByZWRpY3Rpb25fc3BhblwiKS5odG1sKGFpX3ByZWRpY3Rpb24pXG4gICAgJChcIiNhaV9jb25maWRlbmNlX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJsbG1fY29uZmlkZW5jZVwiXSlcblxuICAgICQoXCIjYWlfZXhwbGFuYXRpb25fc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcImxsbV9leHBsYW5hdGlvblwiXSlcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXN0aW9uIVtcInNvdXJjZXNcIl0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X3NwYW5gKS5odG1sKHF1ZXN0aW9uIVtcInNvdXJjZXNcIl1baV0pXG4gICAgfVxuXG4gICAgLy8gc2V0IGJldCB2YWx1ZSByYXRpb1xuICAgIC8vaWYocXVlc3Rpb24uaGFzT3duUHJvcGVydHkoXCJyZXdhcmRfcmF0aW9cIikpIHtcbiAgICAvLyAgICBsZXQgW3JhdGlvMSwgcmF0aW8yXSA9IHF1ZXN0aW9uW1wicmV3YXJkX3JhdGlvXCJdXG4gICAgLy8gICAgcmF0aW8xID0gTnVtYmVyKHJhdGlvMSlcbiAgICAvLyAgICByYXRpbzIgPSBOdW1iZXIocmF0aW8yKVxuICAgIC8vICAgIGJldF92YWxfcmF0aW8gPSByYXRpbzEvcmF0aW8yXG4gICAgLy99IGVsc2Uge1xuICAgIC8vICAgIGJldF92YWxfcmF0aW8gPSAxXG4gICAgLy99XG5cbiAgICB0aW1lX3F1ZXN0aW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgICQoXCIjcHJvZ3Jlc3NcIikudGV4dChgUHJvZ3Jlc3M6ICR7cXVlc3Rpb25faSArIDF9IC8gJHtkYXRhLmxlbmd0aH1gKVxufVxuXG4vLyBnZXQgdXNlciBpZCBhbmQgbG9hZCBxdWV1ZVxuLy8gdHJ5IHRvIHNlZSBpZiBzdGFydCBvdmVycmlkZSB3YXMgcGFzc2VkXG5jb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuY29uc3Qgc3RhcnRPdmVycmlkZSA9IHVybFBhcmFtcy5nZXQoJ3N0YXJ0Jyk7XG5jb25zdCBVSURGcm9tVVJMID0gdXJsUGFyYW1zLmdldChcInVpZFwiKVxuZ2xvYmFsVGhpcy51cmxfZGF0YSA9IHBhcmFtc1RvT2JqZWN0KHVybFBhcmFtcy5lbnRyaWVzKCkpXG5cbmlmIChVSURGcm9tVVJMICE9IG51bGwpIHtcbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJREZyb21VUkwgYXMgc3RyaW5nXG4gICAgaWYgKGdsb2JhbFRoaXMudWlkID09IFwicHJvbGlmaWNfcmFuZG9tXCIpIHtcbiAgICAgICAgbGV0IHF1ZXVlX2lkID0gYCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApfWAucGFkU3RhcnQoMywgXCIwXCIpXG4gICAgICAgIGdsb2JhbFRoaXMudWlkID0gYCR7dXJsUGFyYW1zLmdldChcInByb2xpZmljX3F1ZXVlX25hbWVcIil9XyR7cXVldWVfaWR9YFxuICAgIH1cbn0gZWxzZSBpZiAoREVWTU9ERSkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gXCJkZW1vXCJcbn0gZWxzZSB7XG4gICAgbGV0IFVJRF9tYXliZTogYW55ID0gbnVsbFxuICAgIHdoaWxlIChVSURfbWF5YmUgPT0gbnVsbCkge1xuICAgICAgICBVSURfbWF5YmUgPSBwcm9tcHQoXCJFbnRlciB5b3VyIHVzZXIgaWQuIFBsZWFzZSBnZXQgaW4gdG91Y2ggaWYgeW91IHdlcmUgbm90IGFzc2lnbmVkIGFuIGlkIGJ1dCB3aXNoIHRvIHBhcnRpY2lwYXRlIGluIHRoaXMgZXhwZXJpbWVudC5cIilcbiAgICB9XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBVSURfbWF5YmUhXG59XG5cbi8vIHZlcnNpb24gZm9yIHBhcGVyXG5pZiAoREVWTU9ERSkge1xuICAgIE1PQ0tNT0RFID0gdHJ1ZVxufSBlbHNlIGlmIChnbG9iYWxUaGlzLnVybF9kYXRhWydzZXNzaW9uX2lkJ10uc3RhcnRzV2l0aChcImRlbW9cIikpIHtcbiAgICBNT0NLTU9ERSA9IHRydWVcbn1cblxuY29uc29sZS5sb2coXCJSdW5uaW5nIHdpdGggVUlEXCIsIGdsb2JhbFRoaXMudWlkKVxubG9hZF9kYXRhKCkuY2F0Y2goKF9lcnJvcikgPT4ge1xuICAgIC8vYWxlcnQoXCJJbnZhbGlkIHVzZXIgaWQuXCIpXG4gICAgY29uc29sZS5sb2coXCJJbnZhbGlkIHVzZXIgaWQuXCIpXG4gICAgY29uc29sZS5sb2coZ2xvYmFsVGhpcy51aWQhKVxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxufVxuKS50aGVuKChuZXdfZGF0YSkgPT4ge1xuICAgIGRhdGEgPSBuZXdfZGF0YVxuICAgIGlmIChzdGFydE92ZXJyaWRlICE9IG51bGwpIHtcbiAgICAgICAgcXVlc3Rpb25faSA9IHBhcnNlSW50KHN0YXJ0T3ZlcnJpZGUpIC0gMVxuICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0aW5nIGZyb21cIiwgcXVlc3Rpb25faSlcbiAgICB9XG4gICAgLy8gbmV4dF9xdWVzdGlvbigpXG4gICAgbmV4dF9pbnN0cnVjdGlvbnMoMClcbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5zaG93KClcbiAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG59KVxuXG5jb25zb2xlLmxvZyhcIlN0YXJ0aW5nIHNlc3Npb24gd2l0aCBVSUQ6XCIsIGdsb2JhbFRoaXMudWlkISlcblxubGV0IGFsZXJ0X2FjdGl2ZSA9IGZhbHNlXG5kb2N1bWVudC5vbnZpc2liaWxpdHljaGFuZ2UgPSAoKSA9PiB7XG4gICAgaWYgKCFhbGVydF9hY3RpdmUpIHtcbiAgICAgICAgY291bnRfZXhpdGVkX3BhZ2UgKz0gMVxuICAgICAgICBhbGVydF9hY3RpdmUgPSB0cnVlXG4gICAgICAgIC8vaWYgKCEoZ2xvYmFsVGhpcy51aWQhLnN0YXJ0c1dpdGgoXCJkZW1vXCIpKSkge1xuICAgICAgICAvLyAgICBhbGVydChcIlBsZWFzZSBkb24ndCBsZWF2ZSB0aGUgcGFnZS4gSWYgeW91IGRvIHNvIGFnYWluLCB3ZSBtYXkgcmVzdHJpY3QgcGF5aW5nIHlvdS5cIilcbiAgICAgICAgLy99XG4gICAgICAgIGFsZXJ0X2FjdGl2ZSA9IGZhbHNlXG4gICAgfVxufSIsImZ1bmN0aW9uIHBhcmFtc1RvT2JqZWN0KGVudHJpZXMpIHtcbiAgY29uc3QgcmVzdWx0ID0ge31cbiAgLy8gZWFjaCAnZW50cnknIGlzIGEgW2tleSwgdmFsdWVdIHR1cHBsZVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBlbnRyaWVzKSB7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgeyBwYXJhbXNUb09iamVjdCB9Il0sIm5hbWVzIjpbIlNFUlZFUl9MT0dfUk9PVCIsImFzeW5jIiwibG9nX2RhdGEiLCJkYXRhIiwiZ2xvYmFsVGhpcyIsInVybF9kYXRhIiwiY29uc29sZSIsImxvZyIsInVpZCIsInJlc3VsdCIsIiQiLCJhamF4IiwiSlNPTiIsInN0cmluZ2lmeSIsInByb2plY3QiLCJwYXlsb2FkIiwidHlwZSIsImNvbnRlbnRUeXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Iiwic2xlZXAiLCJlIiwiTU9DS01PREUiLCJmaW5hbF91c2VyX2RlY2lzaW9uIiwidGltZV9xdWVzdGlvbl9zdGFydCIsInF1ZXN0aW9uX2kiLCJxdWVzdGlvbiIsImFjY2Vzc2VkX2V4cGxhbmF0aW9uIiwiYWNjZXNzZWRfc291cmNlcyIsImFjY2Vzc2VkX2luZGl2aWR1YWxfc291cmNlIiwiYmFsYW5jZSIsInRpbWVfdG9fYWNjZXNzX2V4cGxhbmF0aW9uIiwidGltZV90b19hY2Nlc3Nfc291cmNlcyIsInRpbWVfdG9fYWNjZXNzX2luZGl2aWR1YWxfc291cmNlIiwidGltZV9maW5hbF9kZWNpc2lvbiIsImluc3RydWN0aW9uX2kiLCJjb3VudF9leGl0ZWRfcGFnZSIsInNob3dTb3VyY2UiLCJzb3VyY2VfbnVtIiwiZGl2IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsImJ1dHRvbl9kaXYiLCJjbGFzc05hbWUiLCJEYXRlIiwibm93IiwidXBkYXRlVXNlckRlY2lzaW9uIiwidXNlcl9kZWNpc2lvbiIsImF0dHIiLCJzaG93IiwicmVtb3ZlQXR0ciIsIm5leHRfaW5zdHJ1Y3Rpb25zIiwiaW5jcmVtZW50IiwidmFsIiwiaGlkZSIsIm5leHRfcXVlc3Rpb24iLCJjaGlsZHJlbiIsImVhY2giLCJfIiwiZWwiLCJpIiwibGVuZ3RoIiwidGV4dCIsInRvRml4ZWQiLCJodG1sIiwiYWlfcHJlZGljdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbiIsInVzZXJfaXNfY29ycmVjdCIsImxvZ2dlZF9kYXRhIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdGFydE92ZXJyaWRlIiwiZ2V0IiwiVUlERnJvbVVSTCIsImVudHJpZXMiLCJrZXkiLCJ2YWx1ZSIsInBhcmFtc1RvT2JqZWN0IiwicXVldWVfaWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwYWRTdGFydCIsIlVJRF9tYXliZSIsInByb21wdCIsInN0YXJ0c1dpdGgiLCJnZXRKU09OIiwibG9hZF9kYXRhIiwiY2F0Y2giLCJfZXJyb3IiLCJyZWxvYWQiLCJ0aGVuIiwibmV3X2RhdGEiLCJwYXJzZUludCIsImFsZXJ0X2FjdGl2ZSIsIm9udmlzaWJpbGl0eWNoYW5nZSJdLCJzb3VyY2VSb290IjoiIn0=