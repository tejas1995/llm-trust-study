(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{o:()=>i});let t="https://tejassrinivasan.pythonanywhere.com/";var i=!1,n=[];let o,a,r=-1,s=null,l=!1,c=!1,d=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],_=0,u=-1,b=-1,m=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],p=-1,g=0,v=0;function h(e){if(-1!=p)return;const t=document.getElementById(`source_${e}_span`);t&&(t.style.display="block");const i=document.getElementById(`source_${e}_dropbtn`);i&&(i.className="arrow down"),d[e]=!0,m[e]=Date.now()-a,$(`#source_${e}_titlebar`).attr("disabled","true"),$(`#source_${e}_titlebar`).attr("activedecision","true")}function f(e){if(-1!=r){o=!!e,p=Date.now()-a,$("#ai_explanation_titlebar").attr("disabled","true"),$("#view_sources_titlebar").attr("disabled","true");for(let e=0;e<10;e++)$(`#source_${e}_titlebar`).attr("disabled","true");$("#button_next").show(),$("#button_next").removeAttr("disabled"),e?(o=!0,$("#button_user_decision_claimtrue").attr("activedecision","true"),$("#button_user_decision_claimfalse").attr("activedecision","false")):(o=!1,$("#button_user_decision_claimfalse").attr("activedecision","true"),$("#button_user_decision_claimtrue").attr("activedecision","false"))}}function w(e){g+=e,0==g?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),g>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==g&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),y()),$("#main_box_instructions").children(":not(input)").each(((e,t)=>{$(t).hide()})),$(`#instructions_${g}`).show()}function y(){$("#button_user_decision_claimtrue").removeAttr("activedecision"),$("#button_user_decision_claimfalse").removeAttr("activedecision"),$("#button_user_decision_claimtrue").removeAttr("disabled"),$("#button_user_decision_claimfalse").removeAttr("disabled"),$("#ai_explanation_dropbtn").removeAttr("disabled"),$("#ai_explanation_dropbtn").removeAttr("activedecision"),$("#ai_explanation_dropbtn").attr("class","arrow right"),$("#ai_explanation_titlebar").removeAttr("disabled"),$("#ai_explanation_titlebar").removeAttr("activedecision"),$("#ai_explanation_dropdown").hide(),$("#view_sources_dropbtn").removeAttr("disabled"),$("#view_sources_dropbtn").removeAttr("activedecision"),$("#view_sources_dropbtn").attr("class","arrow right"),$("#view_sources_titlebar").removeAttr("disabled"),$("#view_sources_titlebar").removeAttr("activedecision"),$("#all_sources_div").hide();for(let e=0;e<10;e++)$(`#source_${e}_span`).hide(),$(`#source_${e}_dropbtn`).removeAttr("disabled"),$(`#source_${e}_dropbtn`).removeAttr("activedecision"),$(`#source_${e}_dropbtn`).attr("class","arrow right"),$(`#source_${e}_titlebar`).removeAttr("disabled"),$(`#source_${e}_titlebar`).removeAttr("activedecision");if(l=!1,c=!1,d=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],u=-1,b=-1,m=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],p=-1,$("#button_next").hide(),r+=1,r>=n.length)return $("#main_box_experiment").hide(),void(i?$("#main_box_end_mock").show():$("#main_box_end").show());s=n[r],$("#claim_span").html(s.claim);let e=s.llm_prediction?"The claim is true.":"The claim is false.";$("#ai_prediction_span").html(e),$("#ai_confidence_span").html(s.llm_confidence),$("#ai_explanation_span").html(s.llm_explanation);for(let e=0;e<s.sources.length;e++)$(`#source_${e}_span`).html(s.sources[e]);a=Date.now(),$("#progress").text(`Progress: ${r+1} / ${n.length}`)}document.getElementById("ai_explanation_titlebar")?.addEventListener("click",(function(){if(-1!=p)return;const e=document.getElementById("ai_explanation_dropdown");e&&(e.style.display="block");const t=document.getElementById("ai_explanation_dropbtn");t&&(t.className="arrow vanish"),l=!0,u=Date.now()-a,$("#ai_explanation_titlebar").attr("disabled","true"),$("#ai_explanation_titlebar").attr("activedecision","true")})),document.getElementById("view_sources_titlebar")?.addEventListener("click",(function(){if(-1!=p)return;const e=document.getElementById("all_sources_div");e&&(e.style.display="block");const t=document.getElementById("view_sources_dropbtn");t&&(t.className="arrow vanish"),c=!0,b=Date.now()-a,$("#view_sources_titlebar").attr("disabled","true"),$("#view_sources_titlebar").attr("activedecision","true")})),document.getElementById("source_0_titlebar")?.addEventListener("click",(()=>h(0))),document.getElementById("source_1_titlebar")?.addEventListener("click",(()=>h(1))),document.getElementById("source_2_titlebar")?.addEventListener("click",(()=>h(2))),document.getElementById("source_3_titlebar")?.addEventListener("click",(()=>h(3))),document.getElementById("source_4_titlebar")?.addEventListener("click",(()=>h(4))),document.getElementById("source_5_titlebar")?.addEventListener("click",(()=>h(5))),document.getElementById("source_6_titlebar")?.addEventListener("click",(()=>h(6))),document.getElementById("source_7_titlebar")?.addEventListener("click",(()=>h(7))),document.getElementById("source_8_titlebar")?.addEventListener("click",(()=>h(8))),document.getElementById("source_9_titlebar")?.addEventListener("click",(()=>h(9))),$("#button_user_decision_claimtrue").on("click",(()=>f(!0))),$("#button_user_decision_claimfalse").on("click",(()=>f(!1))),$("#button_instructions_next").on("click",(()=>w(1))),$("#button_instructions_prev").on("click",(()=>w(-1))),$("#button_next").on("click",(()=>{if(s.gt_label==o&&(_+=.1),-1!=r){let e={question_i:r,user_balance_post_interaction:_,final_user_decision:o,accessed_explanation:l,accessed_sources:c,accessed_individual_source:d};e.times={access_explanation:u,access_sources:b,access_individual_source:m,final_decision:p},e.question=s,e.count_exited_page=v,async function(e){if(i)console.log("logged (mock)",e);else{e.url_data=globalThis.url_data,console.log("Data"),"study_id"in e.url_data||(e.url_data.study_id="trialrun_studies"),e.url_data.queue_id=globalThis.uid,console.log("logged",e),console.log("Logging to",t+"log");try{let i=await $.ajax(t+"log",{data:JSON.stringify({project:"llm-trust-study/"+e.url_data.study_id,uid:globalThis.uid+"_"+e.url_data.prolific_id,payload:JSON.stringify(e)}),type:"POST",contentType:"application/json"});return await async function(){return new Promise((e=>setTimeout(e,2e3)))}(),i}catch(e){console.log(e)}}}(e),v=0}y()}));const x=new URLSearchParams(window.location.search),E=x.get("start"),k=x.get("uid");if(globalThis.url_data=function(e){const t={};for(const[i,n]of e)t[i]=n;return t}(x.entries()),null!=k){if(globalThis.uid=k,"prolific_random"==globalThis.uid){let e=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${x.get("prolific_queue_name")}_${e}`}}else{let e=null;for(;null==e;)e=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=e}globalThis.uid.startsWith("demo_paper")&&(i=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((e=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((e=>{n=e,null!=E&&(r=parseInt(E)-1,console.log("Starting from",r)),w(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let I=!1;document.onvisibilitychange=()=>{I||(v+=1,I=!0,I=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RWhCLE9BQU90QixDQUNULENEbVZzQnVCLENBQWVULEVBQVVPLFdBRTdCLE1BQWRELEdBRUEsR0FEQXZCLFdBQVdFLElBQU1xQixFQUNLLG1CQUFsQnZCLFdBQVdFLElBQTBCLENBQ3JDLElBQUl5QixFQUFXLEdBQUdDLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxZQUFpQkMsU0FBUyxFQUFHLEtBQy9EL0IsV0FBV0UsSUFBTSxHQUFHZSxFQUFVN0UsSUFBSSwwQkFBMEJ1RixHLE1BSTdELENBQ0gsSUFBSUssRUFBaUIsS0FDckIsS0FBb0IsTUFBYkEsR0FDSEEsRUFBWUMsT0FBTyxzSEFFdkJqQyxXQUFXRSxJQUFNOEIsQyxDQUlqQmhDLFdBQVdFLElBQUlnQyxXQUFXLGdCQUMxQnZGLEdBQVcsR0FJZm1ELFFBQVFDLElBQUksbUJBQW9CQyxXQUFXRSxLRHpXcENMLGlCQUtILGFBSG1CdkIsRUFBRTZELFFBQ2pCLGdCQUFnQm5DLFdBQVdFLGNBQWM5QixLQUFLQyxRQUd0RCxDQ29XQStELEdBQVlDLE9BQU9DLElBRWZ4QyxRQUFRQyxJQUFJLG9CQUNaRCxRQUFRQyxJQUFJQyxXQUFXRSxLQUN2QmlCLE9BQU9DLFNBQVNtQixRQUFRLElBRTFCQyxNQUFNQyxJQUNKN0YsRUFBTzZGLEVBQ2MsTUFBakJuQixJQUNBdkUsRUFBYTJGLFNBQVNwQixHQUFpQixFQUN2Q3hCLFFBQVFDLElBQUksZ0JBQWlCaEQsSUFHakM2QixFQUFrQixHQUNsQk4sRUFBRSwwQkFBMEJJLE9BQzVCSixFQUFFLGlDQUFpQ1MsTUFBTSxJQUc3Q2UsUUFBUUMsSUFBSSw2QkFBOEJDLFdBQVdFLEtBRXJELElBQUl5QyxHQUFlLEVBQ25CN0UsU0FBUzhFLG1CQUFxQixLQUNyQkQsSUFDRGpGLEdBQXFCLEVBQ3JCaUYsR0FBZSxFQUlmQSxHQUFlLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly8vLi9zcmMvY29ubmVjdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IERFVk1PREUgfSBmcm9tICcuL2dsb2JhbHMnXG5pbXBvcnQgeyBNT0NLTU9ERSB9IGZyb20gJy4vbWFpbidcblxubGV0IFNFUlZFUl9MT0dfUk9PVCA9IERFVk1PREUgPyBcImh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9cIiA6IFwiaHR0cHM6Ly90ZWphc3NyaW5pdmFzYW4ucHl0aG9uYW55d2hlcmUuY29tL1wiXG5cbmFzeW5jIGZ1bmN0aW9uIHNsZWVwKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRfZGF0YSgpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIGluY2x1ZGUgdGltZXN0YW1wIHNvIHRoYXQgdGhpbmdzIGRvbid0IGdldCBjYWNoZWRcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgJC5nZXRKU09OKFxuICAgICAgICBgYmFrZWRfcXVldWVzLyR7Z2xvYmFsVGhpcy51aWR9Lmpzb24/dD0ke0RhdGUubm93KCl9YCxcbiAgICApXG4gICAgcmV0dXJuIHJlc3VsdFxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ19kYXRhKGRhdGEpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImxvZ2dlZCAobW9jaylcIiwgZGF0YSlcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGRhdGFbXCJ1cmxfZGF0YVwiXSA9IGdsb2JhbFRoaXMudXJsX2RhdGFcbiAgICBjb25zb2xlLmxvZyhcIkRhdGFcIilcbiAgICBpZiAoIShcInN0dWR5X2lkXCIgaW4gZGF0YVsndXJsX2RhdGEnXSkpIHtcbiAgICAgICAgZGF0YVsndXJsX2RhdGEnXVtcInN0dWR5X2lkXCJdID0gXCJ0cmlhbHJ1bl9zdHVkaWVzXCJcbiAgICB9XG4gICAgZGF0YVtcInVybF9kYXRhXCJdW1wicXVldWVfaWRcIl0gPSBnbG9iYWxUaGlzLnVpZFxuICAgIGNvbnNvbGUubG9nKFwibG9nZ2VkXCIsIGRhdGEpXG4gICAgY29uc29sZS5sb2coXCJMb2dnaW5nIHRvXCIsIFNFUlZFUl9MT0dfUk9PVCArIFwibG9nXCIpXG5cbiAgICB0cnkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgU0VSVkVSX0xPR19ST09UICsgXCJsb2dcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwibGxtLXRydXN0LXN0dWR5L1wiK2RhdGFbJ3VybF9kYXRhJ11bJ3N0dWR5X2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIHVpZDogZ2xvYmFsVGhpcy51aWQrXCJfXCIrZGF0YVsndXJsX2RhdGEnXVsncHJvbGlmaWNfaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYXdhaXQgc2xlZXAoMjAwMCk7XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxufSIsImltcG9ydCB7IERFVk1PREUgfSBmcm9tIFwiLi9nbG9iYWxzXCJcbmV4cG9ydCB2YXIgVUlEOiBzdHJpbmdcbmV4cG9ydCB2YXIgTU9DS01PREU6IGJvb2xlYW4gPSBmYWxzZVxuaW1wb3J0IHsgbG9hZF9kYXRhLCBsb2dfZGF0YSB9IGZyb20gJy4vY29ubmVjdG9yJ1xuaW1wb3J0IHsgcGFyYW1zVG9PYmplY3QgfSBmcm9tIFwiLi91dGlsc1wiXG5cbnZhciBkYXRhOiBhbnlbXSA9IFtdXG5sZXQgcXVlc3Rpb25faSA9IC0xXG5sZXQgcXVlc3Rpb246IGFueSA9IG51bGxcbmxldCBmaW5hbF91c2VyX2RlY2lzaW9uOiBib29sZWFuXG5sZXQgYWNjZXNzZWRfZXhwbGFuYXRpb246IGJvb2xlYW4gPSBmYWxzZVxubGV0IGFjY2Vzc2VkX3NvdXJjZXM6IGJvb2xlYW4gPSBmYWxzZVxubGV0IGFjY2Vzc2VkX2luZGl2aWR1YWxfc291cmNlOiBhbnlbXSA9IFtmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZV1cbmxldCBiYWxhbmNlID0gMFxubGV0IHRpbWVfcXVlc3Rpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfdG9fYWNjZXNzX2V4cGxhbmF0aW9uOiBudW1iZXIgPSAtMVxubGV0IHRpbWVfdG9fYWNjZXNzX3NvdXJjZXM6IG51bWJlciA9IC0xXG5sZXQgdGltZV90b19hY2Nlc3NfaW5kaXZpZHVhbF9zb3VyY2U6IGFueVtdID0gWy0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xXVxubGV0IHRpbWVfZmluYWxfZGVjaXNpb246IG51bWJlciA9IC0xXG5sZXQgaW5zdHJ1Y3Rpb25faTogbnVtYmVyID0gMFxubGV0IGNvdW50X2V4aXRlZF9wYWdlOiBudW1iZXIgPSAwXG5cbmZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgICB0aHJvdyBtZXNzYWdlIHx8IFwiQXNzZXJ0aW9uIGZhaWxlZFwiO1xuICAgIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gdG9nZ2xlIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBkaXYgZWxlbWVudFxuZnVuY3Rpb24gc2hvd0V4cGxhbmF0aW9uKCkge1xuICAgIGlmICh0aW1lX2ZpbmFsX2RlY2lzaW9uICE9IC0xKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgZGl2IGVsZW1lbnQgYnkgaXRzIElEXG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FpX2V4cGxhbmF0aW9uX2Ryb3Bkb3duJyk7XG4gICAgaWYgKGRpdikge1xuICAgICAgICAvLyBUb2dnbGUgdGhlIHZpc2liaWxpdHlcbiAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cbiAgICBjb25zdCBidXR0b25fZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FpX2V4cGxhbmF0aW9uX2Ryb3BidG4nKTtcbiAgICBpZiAoYnV0dG9uX2Rpdikge1xuICAgICAgICAvL0NoYW5nZSB0aGUgY2xhc3MgdG8gYXJyb3cgZG93blxuICAgICAgICBidXR0b25fZGl2LmNsYXNzTmFtZSA9ICdhcnJvdyB2YW5pc2gnO1xuICAgIH1cbiAgICBhY2Nlc3NlZF9leHBsYW5hdGlvbiA9IHRydWVcbiAgICB0aW1lX3RvX2FjY2Vzc19leHBsYW5hdGlvbiA9IERhdGUubm93KCkgLSB0aW1lX3F1ZXN0aW9uX3N0YXJ0XG5cbiAgICAvLyQoXCIjYWlfZXhwbGFuYXRpb25fZHJvcGRvd25cIikudG9nZ2xlKClcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3RpdGxlYmFyXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3RpdGxlYmFyXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgfVxuICBcbi8vIEV2ZW50IGxpc3RlbmVyIGZvciB0aGUgYnV0dG9uIGNsaWNrXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWlfZXhwbGFuYXRpb25fdGl0bGViYXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93RXhwbGFuYXRpb24pO1xuXG5mdW5jdGlvbiBzaG93QWxsU291cmNlcygpIHtcbiAgICBpZiAodGltZV9maW5hbF9kZWNpc2lvbiAhPSAtMSkge1xuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGRpdiBlbGVtZW50IGJ5IGl0cyBJRFxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxfc291cmNlc19kaXYnKTtcbiAgICBpZiAoZGl2KSB7XG4gICAgICAgIC8vIFRvZ2dsZSB0aGUgdmlzaWJpbGl0eVxuICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuICAgIGNvbnN0IGJ1dHRvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld19zb3VyY2VzX2Ryb3BidG4nKTtcbiAgICBpZiAoYnV0dG9uX2Rpdikge1xuICAgICAgICAvL0NoYW5nZSB0aGUgY2xhc3MgdG8gYXJyb3cgdmFuaXNoXG4gICAgICAgIGJ1dHRvbl9kaXYuY2xhc3NOYW1lID0gJ2Fycm93IHZhbmlzaCc7XG4gICAgfVxuICAgIGFjY2Vzc2VkX3NvdXJjZXMgPSB0cnVlXG4gICAgdGltZV90b19hY2Nlc3Nfc291cmNlcyA9IERhdGUubm93KCkgLSB0aW1lX3F1ZXN0aW9uX3N0YXJ0XG5cbiAgICAvLyQoXCIjYWlfZXhwbGFuYXRpb25fZHJvcGRvd25cIikudG9nZ2xlKClcbiAgICAkKFwiI3ZpZXdfc291cmNlc190aXRsZWJhclwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiN2aWV3X3NvdXJjZXNfdGl0bGViYXJcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxufVxuXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlIGJ1dHRvbiBjbGlja1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdfc291cmNlc190aXRsZWJhcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dBbGxTb3VyY2VzKTtcblxuZnVuY3Rpb24gc2hvd1NvdXJjZShzb3VyY2VfbnVtOiBudW1iZXIpIHtcbiAgICBpZiAodGltZV9maW5hbF9kZWNpc2lvbiAhPSAtMSkge1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHRoZSBkaXYgZWxlbWVudCBieSBpdHMgSURcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc291cmNlXyR7c291cmNlX251bX1fc3BhbmApO1xuICAgIGlmIChkaXYpIHtcbiAgICAgICAgLy8gVG9nZ2xlIHRoZSB2aXNpYmlsaXR5XG4gICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG4gICAgY29uc3QgYnV0dG9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzb3VyY2VfJHtzb3VyY2VfbnVtfV9kcm9wYnRuYCk7XG4gICAgaWYgKGJ1dHRvbl9kaXYpIHtcbiAgICAgICAgLy9DaGFuZ2UgdGhlIGNsYXNzIHRvIGFycm93IGRvd25cbiAgICAgICAgYnV0dG9uX2Rpdi5jbGFzc05hbWUgPSAnYXJyb3cgZG93bic7XG4gICAgfVxuICAgIGFjY2Vzc2VkX2luZGl2aWR1YWxfc291cmNlW3NvdXJjZV9udW1dID0gdHJ1ZVxuICAgIHRpbWVfdG9fYWNjZXNzX2luZGl2aWR1YWxfc291cmNlW3NvdXJjZV9udW1dID0gRGF0ZS5ub3coKSAtIHRpbWVfcXVlc3Rpb25fc3RhcnRcbiAgICAvLyQoXCIjYWlfZXhwbGFuYXRpb25fZHJvcGRvd25cIikudG9nZ2xlKClcbiAgICAkKGAjc291cmNlXyR7c291cmNlX251bX1fdGl0bGViYXJgKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChgI3NvdXJjZV8ke3NvdXJjZV9udW19X3RpdGxlYmFyYCkuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxufVxuXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlIGJ1dHRvbiBjbGlja1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV8wX3RpdGxlYmFyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1NvdXJjZSgwKSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlXzFfdGl0bGViYXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzaG93U291cmNlKDEpKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfMl90aXRsZWJhcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dTb3VyY2UoMikpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV8zX3RpdGxlYmFyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1NvdXJjZSgzKSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlXzRfdGl0bGViYXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzaG93U291cmNlKDQpKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfNV90aXRsZWJhcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dTb3VyY2UoNSkpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV82X3RpdGxlYmFyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1NvdXJjZSg2KSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlXzdfdGl0bGViYXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzaG93U291cmNlKDcpKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfOF90aXRsZWJhcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dTb3VyY2UoOCkpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV85X3RpdGxlYmFyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1NvdXJjZSg5KSk7XG5cbmZ1bmN0aW9uIHVwZGF0ZVVzZXJEZWNpc2lvbih1c2VyX2RlY2lzaW9uOiBib29sZWFuKSB7XG4gICAgaWYgKHF1ZXN0aW9uX2kgIT0gLTEpIHtcbiAgICAgICAgZmluYWxfdXNlcl9kZWNpc2lvbiA9IHVzZXJfZGVjaXNpb24gPyB0cnVlIDogZmFsc2VcblxuICAgICAgICB0aW1lX2ZpbmFsX2RlY2lzaW9uID0gRGF0ZS5ub3coKSAtIHRpbWVfcXVlc3Rpb25fc3RhcnRcblxuICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3RpdGxlYmFyXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiN2aWV3X3NvdXJjZXNfdGl0bGViYXJcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICAgICBmb3IgKGxldCBzb3VyY2VfbnVtID0gMDsgc291cmNlX251bSA8IDEwOyBzb3VyY2VfbnVtKyspIHtcbiAgICAgICAgICAgICQoYCNzb3VyY2VfJHtzb3VyY2VfbnVtfV90aXRsZWJhcmApLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAgICAgfVxuXG4gICAgICAgICQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgICAgICQoXCIjYnV0dG9uX25leHRcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgICAgIC8vJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbXRydWVcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICAgICAvLyQoXCIjYnV0dG9uX3VzZXJfZGVjaXNpb25fY2xhaW1mYWxzZVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgICAgIGlmICh1c2VyX2RlY2lzaW9uKSB7XG4gICAgICAgICAgICBmaW5hbF91c2VyX2RlY2lzaW9uID0gdHJ1ZVxuICAgICAgICAgICAgJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbXRydWVcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAgICAgJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbWZhbHNlXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcImZhbHNlXCIpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmaW5hbF91c2VyX2RlY2lzaW9uID0gZmFsc2VcbiAgICAgICAgICAgICQoXCIjYnV0dG9uX3VzZXJfZGVjaXNpb25fY2xhaW1mYWxzZVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICAgICAkKFwiI2J1dHRvbl91c2VyX2RlY2lzaW9uX2NsYWltdHJ1ZVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJmYWxzZVwiKVxuICAgICAgICB9XG5cbiAgICB9XG59XG5cbiQoXCIjYnV0dG9uX3VzZXJfZGVjaXNpb25fY2xhaW10cnVlXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gdXBkYXRlVXNlckRlY2lzaW9uKHRydWUpKVxuJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbWZhbHNlXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gdXBkYXRlVXNlckRlY2lzaW9uKGZhbHNlKSlcblxuXG5mdW5jdGlvbiBuZXh0X2luc3RydWN0aW9ucyhpbmNyZW1lbnQ6IG51bWJlcikge1xuICAgIGluc3RydWN0aW9uX2kgKz0gaW5jcmVtZW50XG5cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA9PSAwKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfcHJldlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPj0gNikge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuc2hvdygpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIlN0YXJ0IHN0dWR5XCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLmhpZGUoKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS52YWwoXCJOZXh0XCIpXG4gICAgfVxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDcpIHtcbiAgICAgICAgJChcIiNtYWluX2JveF9pbnN0cnVjdGlvbnNcIikuaGlkZSgpXG4gICAgICAgICQoXCIjbWFpbl9ib3hfZXhwZXJpbWVudFwiKS5zaG93KClcbiAgICAgICAgbmV4dF9xdWVzdGlvbigpXG4gICAgfVxuXG4gICAgJChcIiNtYWluX2JveF9pbnN0cnVjdGlvbnNcIikuY2hpbGRyZW4oXCI6bm90KGlucHV0KVwiKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgICAkKGVsKS5oaWRlKClcbiAgICB9KVxuICAgICQoYCNpbnN0cnVjdGlvbnNfJHtpbnN0cnVjdGlvbl9pfWApLnNob3coKVxufVxuJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikub24oXCJjbGlja1wiLCAoKSA9PiBuZXh0X2luc3RydWN0aW9ucygrMSkpXG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfcHJldlwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKC0xKSlcblxuJChcIiNidXR0b25fbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcblxuICAgIGxldCBndF9sYWJlbDogYm9vbGVhbiA9IHF1ZXN0aW9uIVtcImd0X2xhYmVsXCJdXG4gICAgbGV0IHVzZXJfaXNfY29ycmVjdDogYm9vbGVhbiA9IGd0X2xhYmVsID09IGZpbmFsX3VzZXJfZGVjaXNpb25cbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIGJhbGFuY2UgKz0gMC4xXG4gICAgfVxuXG4gICAgaWYgKHF1ZXN0aW9uX2kgIT0gLTEpIHtcbiAgICAgICAgbGV0IGxvZ2dlZF9kYXRhID0ge1xuICAgICAgICAgICAgXCJxdWVzdGlvbl9pXCI6IHF1ZXN0aW9uX2ksXG4gICAgICAgICAgICBcInVzZXJfYmFsYW5jZV9wb3N0X2ludGVyYWN0aW9uXCI6IGJhbGFuY2UsXG4gICAgICAgICAgICBcImZpbmFsX3VzZXJfZGVjaXNpb25cIjogZmluYWxfdXNlcl9kZWNpc2lvbixcbiAgICAgICAgICAgIFwiYWNjZXNzZWRfZXhwbGFuYXRpb25cIjogYWNjZXNzZWRfZXhwbGFuYXRpb24sXG4gICAgICAgICAgICBcImFjY2Vzc2VkX3NvdXJjZXNcIjogYWNjZXNzZWRfc291cmNlcyxcbiAgICAgICAgICAgIFwiYWNjZXNzZWRfaW5kaXZpZHVhbF9zb3VyY2VcIjogYWNjZXNzZWRfaW5kaXZpZHVhbF9zb3VyY2UsXG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZWRfZGF0YVsndGltZXMnXSA9IHtcbiAgICAgICAgICAgIFwiYWNjZXNzX2V4cGxhbmF0aW9uXCI6IHRpbWVfdG9fYWNjZXNzX2V4cGxhbmF0aW9uLFxuICAgICAgICAgICAgXCJhY2Nlc3Nfc291cmNlc1wiOiB0aW1lX3RvX2FjY2Vzc19zb3VyY2VzLFxuICAgICAgICAgICAgXCJhY2Nlc3NfaW5kaXZpZHVhbF9zb3VyY2VcIjogdGltZV90b19hY2Nlc3NfaW5kaXZpZHVhbF9zb3VyY2UsXG4gICAgICAgICAgICBcImZpbmFsX2RlY2lzaW9uXCI6IHRpbWVfZmluYWxfZGVjaXNpb24sXG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3F1ZXN0aW9uJ10gPSBxdWVzdGlvblxuICAgICAgICBsb2dnZWRfZGF0YVsnY291bnRfZXhpdGVkX3BhZ2UnXSA9IGNvdW50X2V4aXRlZF9wYWdlXG4gICAgICAgIGxvZ19kYXRhKGxvZ2dlZF9kYXRhKVxuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSA9IDBcbiAgICB9XG4gICAgXG5cbiAgICBuZXh0X3F1ZXN0aW9uKClcbn0pO1xuXG5cblxuZnVuY3Rpb24gc2hvd19yZXN1bHQoKSB7XG5cblxuICAgIC8vbGV0IGFpX2lzX2NvcnJlY3Q6IGJvb2xlYW4gPSBxdWVzdGlvbiFbXCJsbG1faXNfY29ycmVjdFwiXVxuICAgIC8vbGV0IG1lc3NhZ2UgPSBcIkNvcnJlY3QgYW5zd2VyOiA8Yj5PcHRpb24gXCIgKyBjb3JyZWN0X29wdGlvbiArIFwiPC9iPi48YnI+XCJcbiAgICAvL2lmICh1c2VyX2lzX2NvcnJlY3QpIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+Y29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIC8vfVxuICAgIC8vZWxzZSB7XG4gICAgLy8gICAgbWVzc2FnZSArPSBcIllvdSBwaWNrZWQgT3B0aW9uIFwiICsgZmluYWxfdXNlcl9kZWNpc2lvbiArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgLy99XG4gICAgLy9pZiAoYWlfaXNfY29ycmVjdCkge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PGI+PC9zcGFuPi48YnI+XCJcbiAgICAvL31cbiAgICAvL2Vsc2Uge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPmluY29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIC8vfVxuICAgIC8vaWYgKHVzZXJfaXNfY29ycmVjdCkge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+WW91IHJlY2VpdmUgYSByZXdhcmQgb2YgJDAuMTAuPC9iPjwvc3Bhbj5cIlxuICAgIC8vICAgIGJhbGFuY2UgKz0gMC4xXG4gICAgLy99XG4gICAgLy9lbHNlIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IFwiPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+WW91IGRvIG5vdCByZWNlaXZlIGFueSByZXdhcmQuPC9iPjwvc3Bhbj5cIlxuICAgIC8vfVxuICAgIC8vbWVzc2FnZSArPSBcIjxicj5cIlxuICAgIC8vaWYgKHN1Y2Nlc3MpIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IGBZb3UgZ2FpbiAkJHsoYmV0X3ZhbCpiZXRfdmFsX3JhdGlvKS50b0ZpeGVkKDIpfS5gXG4gICAgLy8gICAgYmFsYW5jZSArPSBiZXRfdmFsKmJldF92YWxfcmF0aW9cbiAgICAvL30gZWxzZSB7XG4gICAgLy8gICAgbWVzc2FnZSArPSBgWW91IGxvc2UgJCR7KGJldF92YWwvMS4wKS50b0ZpeGVkKDIpfS5gXG4gICAgLy8gICAgYmFsYW5jZSAtPSBiZXRfdmFsLzEuMFxuICAgIC8vICAgIGJhbGFuY2UgPSBNYXRoLm1heCgwLCBiYWxhbmNlKVxuICAgIC8vfVxuICAgIC8vJChcIiNiYWxhbmNlXCIpLnRleHQoYEJhbGFuY2U6ICQke2JhbGFuY2UudG9GaXhlZCgyKX0gKyAkMS4wYClcbiAgICAvLyQoXCIjcmVzdWx0X3NwYW5cIikuaHRtbChtZXNzYWdlKVxuICAgIC8vLy8kKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKVxuICAgIC8vJChcIiNyZXN1bHRfc3BhblwiKS5zaG93KClcbiAgICAvLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcblxuICAgIC8vJCgnI3JhbmdlX3ZhbCcpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbn1cblxuLy8kKFwiI2J1dHRvbl9wbGFjZV9iZXRcIikub24oXCJjbGlja1wiLCBzaG93X3Jlc3VsdClcblxuZnVuY3Rpb24gbmV4dF9xdWVzdGlvbigpIHtcbiAgICAvLyByZXN0b3JlIHByZXZpb3VzIHN0YXRlIG9mIFVJXG5cbiAgICAkKFwiI2J1dHRvbl91c2VyX2RlY2lzaW9uX2NsYWltdHJ1ZVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl91c2VyX2RlY2lzaW9uX2NsYWltZmFsc2VcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbXRydWVcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fdXNlcl9kZWNpc2lvbl9jbGFpbWZhbHNlXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuXG4gICAgJChcIiNhaV9leHBsYW5hdGlvbl9kcm9wYnRuXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYWlfZXhwbGFuYXRpb25fZHJvcGJ0blwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2Ryb3BidG5cIikuYXR0cihcImNsYXNzXCIsIFwiYXJyb3cgcmlnaHRcIilcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3RpdGxlYmFyXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYWlfZXhwbGFuYXRpb25fdGl0bGViYXJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNhaV9leHBsYW5hdGlvbl9kcm9wZG93blwiKS5oaWRlKClcblxuICAgICQoXCIjdmlld19zb3VyY2VzX2Ryb3BidG5cIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiN2aWV3X3NvdXJjZXNfZHJvcGJ0blwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI3ZpZXdfc291cmNlc19kcm9wYnRuXCIpLmF0dHIoXCJjbGFzc1wiLCBcImFycm93IHJpZ2h0XCIpXG4gICAgJChcIiN2aWV3X3NvdXJjZXNfdGl0bGViYXJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiN2aWV3X3NvdXJjZXNfdGl0bGViYXJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNhbGxfc291cmNlc19kaXZcIikuaGlkZSgpXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X3NwYW5gKS5oaWRlKClcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X2Ryb3BidG5gKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X2Ryb3BidG5gKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X2Ryb3BidG5gKS5hdHRyKFwiY2xhc3NcIiwgXCJhcnJvdyByaWdodFwiKVxuICAgICAgICAkKGAjc291cmNlXyR7aX1fdGl0bGViYXJgKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAgICAgJChgI3NvdXJjZV8ke2l9X3RpdGxlYmFyYCkucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfVxuXG4gICAgYWNjZXNzZWRfZXhwbGFuYXRpb24gPSBmYWxzZVxuICAgIGFjY2Vzc2VkX3NvdXJjZXMgPSBmYWxzZVxuICAgIGFjY2Vzc2VkX2luZGl2aWR1YWxfc291cmNlID0gW2ZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlXVxuXG4gICAgdGltZV90b19hY2Nlc3NfZXhwbGFuYXRpb24gPSAtMVxuICAgIHRpbWVfdG9fYWNjZXNzX3NvdXJjZXMgPSAtMVxuICAgIHRpbWVfdG9fYWNjZXNzX2luZGl2aWR1YWxfc291cmNlID0gWy0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xXVxuICAgIHRpbWVfZmluYWxfZGVjaXNpb24gPSAtMVxuICAgIFxuXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5oaWRlKClcbiAgICAvLyQoXCIjcmFuZ2VfdmFsXCIpLnZhbCh1c2VyX3RydXN0KVxuXG4gICAgcXVlc3Rpb25faSArPSAxXG4gICAgaWYgKHF1ZXN0aW9uX2kgPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLmhpZGUoKVxuICAgICAgICBpZiAoTU9DS01PREUpIHtcbiAgICAgICAgICAgICQoXCIjbWFpbl9ib3hfZW5kX21vY2tcIikuc2hvdygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiI21haW5fYm94X2VuZFwiKS5zaG93KClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgcXVlc3Rpb24gPSBkYXRhW3F1ZXN0aW9uX2ldXG5cbiAgICAkKFwiI2NsYWltX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJjbGFpbVwiXSlcbiAgICBsZXQgYWlfcHJlZGljdGlvbiA9IHF1ZXN0aW9uIVtcImxsbV9wcmVkaWN0aW9uXCJdID8gXCJUaGUgY2xhaW0gaXMgdHJ1ZS5cIiA6IFwiVGhlIGNsYWltIGlzIGZhbHNlLlwiXG4gICAgJChcIiNhaV9wcmVkaWN0aW9uX3NwYW5cIikuaHRtbChhaV9wcmVkaWN0aW9uKVxuICAgICQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wibGxtX2NvbmZpZGVuY2VcIl0pXG5cbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJsbG1fZXhwbGFuYXRpb25cIl0pXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWVzdGlvbiFbXCJzb3VyY2VzXCJdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICQoYCNzb3VyY2VfJHtpfV9zcGFuYCkuaHRtbChxdWVzdGlvbiFbXCJzb3VyY2VzXCJdW2ldKVxuICAgIH1cblxuICAgIC8vIHNldCBiZXQgdmFsdWUgcmF0aW9cbiAgICAvL2lmKHF1ZXN0aW9uLmhhc093blByb3BlcnR5KFwicmV3YXJkX3JhdGlvXCIpKSB7XG4gICAgLy8gICAgbGV0IFtyYXRpbzEsIHJhdGlvMl0gPSBxdWVzdGlvbltcInJld2FyZF9yYXRpb1wiXVxuICAgIC8vICAgIHJhdGlvMSA9IE51bWJlcihyYXRpbzEpXG4gICAgLy8gICAgcmF0aW8yID0gTnVtYmVyKHJhdGlvMilcbiAgICAvLyAgICBiZXRfdmFsX3JhdGlvID0gcmF0aW8xL3JhdGlvMlxuICAgIC8vfSBlbHNlIHtcbiAgICAvLyAgICBiZXRfdmFsX3JhdGlvID0gMVxuICAgIC8vfVxuXG4gICAgdGltZV9xdWVzdGlvbl9zdGFydCA9IERhdGUubm93KClcbiAgICAkKFwiI3Byb2dyZXNzXCIpLnRleHQoYFByb2dyZXNzOiAke3F1ZXN0aW9uX2kgKyAxfSAvICR7ZGF0YS5sZW5ndGh9YClcbn1cblxuLy8gZ2V0IHVzZXIgaWQgYW5kIGxvYWQgcXVldWVcbi8vIHRyeSB0byBzZWUgaWYgc3RhcnQgb3ZlcnJpZGUgd2FzIHBhc3NlZFxuY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbmNvbnN0IHN0YXJ0T3ZlcnJpZGUgPSB1cmxQYXJhbXMuZ2V0KCdzdGFydCcpO1xuY29uc3QgVUlERnJvbVVSTCA9IHVybFBhcmFtcy5nZXQoXCJ1aWRcIilcbmdsb2JhbFRoaXMudXJsX2RhdGEgPSBwYXJhbXNUb09iamVjdCh1cmxQYXJhbXMuZW50cmllcygpKVxuXG5pZiAoVUlERnJvbVVSTCAhPSBudWxsKSB7XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBVSURGcm9tVVJMIGFzIHN0cmluZ1xuICAgIGlmIChnbG9iYWxUaGlzLnVpZCA9PSBcInByb2xpZmljX3JhbmRvbVwiKSB7XG4gICAgICAgIGxldCBxdWV1ZV9pZCA9IGAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKX1gLnBhZFN0YXJ0KDMsIFwiMFwiKVxuICAgICAgICBnbG9iYWxUaGlzLnVpZCA9IGAke3VybFBhcmFtcy5nZXQoXCJwcm9saWZpY19xdWV1ZV9uYW1lXCIpfV8ke3F1ZXVlX2lkfWBcbiAgICB9XG59IGVsc2UgaWYgKERFVk1PREUpIHtcbiAgICBnbG9iYWxUaGlzLnVpZCA9IFwiZGVtb1wiXG59IGVsc2Uge1xuICAgIGxldCBVSURfbWF5YmU6IGFueSA9IG51bGxcbiAgICB3aGlsZSAoVUlEX21heWJlID09IG51bGwpIHtcbiAgICAgICAgVUlEX21heWJlID0gcHJvbXB0KFwiRW50ZXIgeW91ciB1c2VyIGlkLiBQbGVhc2UgZ2V0IGluIHRvdWNoIGlmIHlvdSB3ZXJlIG5vdCBhc3NpZ25lZCBhbiBpZCBidXQgd2lzaCB0byBwYXJ0aWNpcGF0ZSBpbiB0aGlzIGV4cGVyaW1lbnQuXCIpXG4gICAgfVxuICAgIGdsb2JhbFRoaXMudWlkID0gVUlEX21heWJlIVxufVxuXG4vLyB2ZXJzaW9uIGZvciBwYXBlclxuaWYgKGdsb2JhbFRoaXMudWlkLnN0YXJ0c1dpdGgoXCJkZW1vX3BhcGVyXCIpKSB7XG4gICAgTU9DS01PREUgPSB0cnVlXG59IGVsc2Uge1xuXG59XG5jb25zb2xlLmxvZyhcIlJ1bm5pbmcgd2l0aCBVSURcIiwgZ2xvYmFsVGhpcy51aWQpXG5sb2FkX2RhdGEoKS5jYXRjaCgoX2Vycm9yKSA9PiB7XG4gICAgLy9hbGVydChcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhnbG9iYWxUaGlzLnVpZCEpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59XG4pLnRoZW4oKG5ld19kYXRhKSA9PiB7XG4gICAgZGF0YSA9IG5ld19kYXRhXG4gICAgaWYgKHN0YXJ0T3ZlcnJpZGUgIT0gbnVsbCkge1xuICAgICAgICBxdWVzdGlvbl9pID0gcGFyc2VJbnQoc3RhcnRPdmVycmlkZSkgLSAxXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgZnJvbVwiLCBxdWVzdGlvbl9pKVxuICAgIH1cbiAgICAvLyBuZXh0X3F1ZXN0aW9uKClcbiAgICBuZXh0X2luc3RydWN0aW9ucygwKVxuICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLnNob3coKVxuICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5oaWRlKClcbn0pXG5cbmNvbnNvbGUubG9nKFwiU3RhcnRpbmcgc2Vzc2lvbiB3aXRoIFVJRDpcIiwgZ2xvYmFsVGhpcy51aWQhKVxuXG5sZXQgYWxlcnRfYWN0aXZlID0gZmFsc2VcbmRvY3VtZW50Lm9udmlzaWJpbGl0eWNoYW5nZSA9ICgpID0+IHtcbiAgICBpZiAoIWFsZXJ0X2FjdGl2ZSkge1xuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSArPSAxXG4gICAgICAgIGFsZXJ0X2FjdGl2ZSA9IHRydWVcbiAgICAgICAgLy9pZiAoIShnbG9iYWxUaGlzLnVpZCEuc3RhcnRzV2l0aChcImRlbW9cIikpKSB7XG4gICAgICAgIC8vICAgIGFsZXJ0KFwiUGxlYXNlIGRvbid0IGxlYXZlIHRoZSBwYWdlLiBJZiB5b3UgZG8gc28gYWdhaW4sIHdlIG1heSByZXN0cmljdCBwYXlpbmcgeW91LlwiKVxuICAgICAgICAvL31cbiAgICAgICAgYWxlcnRfYWN0aXZlID0gZmFsc2VcbiAgICB9XG59IiwiZnVuY3Rpb24gcGFyYW1zVG9PYmplY3QoZW50cmllcykge1xuICBjb25zdCByZXN1bHQgPSB7fVxuICAvLyBlYWNoICdlbnRyeScgaXMgYSBba2V5LCB2YWx1ZV0gdHVwcGxlXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IHBhcmFtc1RvT2JqZWN0IH0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTRVJWRVJfTE9HX1JPT1QiLCJNT0NLTU9ERSIsImRhdGEiLCJmaW5hbF91c2VyX2RlY2lzaW9uIiwidGltZV9xdWVzdGlvbl9zdGFydCIsInF1ZXN0aW9uX2kiLCJxdWVzdGlvbiIsImFjY2Vzc2VkX2V4cGxhbmF0aW9uIiwiYWNjZXNzZWRfc291cmNlcyIsImFjY2Vzc2VkX2luZGl2aWR1YWxfc291cmNlIiwiYmFsYW5jZSIsInRpbWVfdG9fYWNjZXNzX2V4cGxhbmF0aW9uIiwidGltZV90b19hY2Nlc3Nfc291cmNlcyIsInRpbWVfdG9fYWNjZXNzX2luZGl2aWR1YWxfc291cmNlIiwidGltZV9maW5hbF9kZWNpc2lvbiIsImluc3RydWN0aW9uX2kiLCJjb3VudF9leGl0ZWRfcGFnZSIsInNob3dTb3VyY2UiLCJzb3VyY2VfbnVtIiwiZGl2IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsImJ1dHRvbl9kaXYiLCJjbGFzc05hbWUiLCJEYXRlIiwibm93IiwiJCIsImF0dHIiLCJ1cGRhdGVVc2VyRGVjaXNpb24iLCJ1c2VyX2RlY2lzaW9uIiwic2hvdyIsInJlbW92ZUF0dHIiLCJuZXh0X2luc3RydWN0aW9ucyIsImluY3JlbWVudCIsInZhbCIsImhpZGUiLCJuZXh0X3F1ZXN0aW9uIiwiY2hpbGRyZW4iLCJlYWNoIiwiXyIsImVsIiwiaSIsImxlbmd0aCIsImh0bWwiLCJhaV9wcmVkaWN0aW9uIiwidGV4dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbiIsImxvZ2dlZF9kYXRhIiwiYXN5bmMiLCJjb25zb2xlIiwibG9nIiwiZ2xvYmFsVGhpcyIsInVybF9kYXRhIiwidWlkIiwicmVzdWx0IiwiYWpheCIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9qZWN0IiwicGF5bG9hZCIsInR5cGUiLCJjb250ZW50VHlwZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInNsZWVwIiwiZSIsImxvZ19kYXRhIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdGFydE92ZXJyaWRlIiwiVUlERnJvbVVSTCIsImVudHJpZXMiLCJ2YWx1ZSIsInBhcmFtc1RvT2JqZWN0IiwicXVldWVfaWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwYWRTdGFydCIsIlVJRF9tYXliZSIsInByb21wdCIsInN0YXJ0c1dpdGgiLCJnZXRKU09OIiwibG9hZF9kYXRhIiwiY2F0Y2giLCJfZXJyb3IiLCJyZWxvYWQiLCJ0aGVuIiwibmV3X2RhdGEiLCJwYXJzZUludCIsImFsZXJ0X2FjdGl2ZSIsIm9udmlzaWJpbGl0eWNoYW5nZSJdLCJzb3VyY2VSb290IjoiIn0=